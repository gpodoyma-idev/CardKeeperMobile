
@model dynamic

@{
    ViewBag.Title = "Mobile CardKeeper";
    Layout = "~/Views/__Layout.cshtml";
}

<style type="text/css">
    .card {
        float: left;
        width: 400px;
        margin-right: 50px;
        background-color: lightblue;
    }
    .card_template {
        display: none;
    }
    .card__name {}
    .card__brand {}
    .card__code {}

    .cardcontainer {
        width: 900px;
        margin: 0 auto;
    }
</style>

<h2>Mobile CardKeeper</h2>
<div class="card card_template">
    <div class="card__name"></div>
    <div class="card__brand"></div>
    <div class="card__code"></div>
</div>
<div class="cardcontainer"></div>


<script type="text/javascript">
    $(document).ready(
        function () {
            $.ajax(
                'http://cardkeeper.apphb.com/api/cards/',
            
                {
                    type: 'GET',
                    traditional: true,
                    crossDomain: true,
                    dataType: 'json',
                    data: {},
                    success: function (data, status, xhr) {
                        if (data && data.length) {
                            var container = $('.cardcontainer');
                            for (var i = 0; i < data.length; i++) {
                                var card = $('.card_template').clone().removeClass('card_template');
                                card.find('.card__name').text(data[i].Name);
                                card.find('.card__brand').text(data[i].Brand);
                                card.find('.card__code').text(data[i].Code);
                                container.append(card);
                            }
                        }
                    }
                }
            );
        })

</script>